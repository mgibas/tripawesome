<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="trip-goals">
    <template>
        <style include="iron-flex shared-styles">
        :host {
            display: block;
        }

        trip-goals-distance,
        trip-goal-item {
            width: 100%;
        }
        </style>
        <paper-listbox>
            <template is="dom-repeat" items="[[_goals]]" as="goal">
                <trip-goals-goal-item content trip-key="[[tripKey]]" item="[[goal]]"></trip-goals-goal-item>
                <paper-item disabled="true">
                    <trip-goals-distance from="[[goal]]" to="[[_getNextGoal(index,_goals)]]"></trip-goals-distance>
                </paper-item>
            </template>
        </paper-listbox>
    </template>
    <script>
    (() => {
        'use strict';

        class TripGoals {
            get is() {
                return 'trip-goals';
            }
            get properties() {
                return {
                    tripKey: {
                        type: String
                    },
                    _goals: {
                        type: Array,
                        computed: '_computeGoals(goals)'
                    }
                };
            }

            _computeGoals(goals) {
                if (!goals) return [];

                return Object.keys(goals)
                    .map((k) => {
                        goals[k].key = k;
                        return goals[k];
                    });
            }

            _getNextGoal(index) {
                return this._goals[index + 1];
            }
        }
        Polymer(TripGoals);
    })();
    </script>
</dom-module>
