<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="trips-element">
    <template>
        <style include="shared-styles">
        :host {
            display: block;
        }

        #cards {
            padding-top: 1rem;
        }

        trip-card + trip-card {
            margin-top: 1rem;
        }

        trip-card {
            margin-left: 1rem;
            margin-right: 1rem;
        }

        trip-card[deleted] {
            margin-top: 0rem;
        }
        </style>
        <firebase-query app-name="tripawesome" path="/trips" data="{{trips}}"></firebase-query>
        <firebase-document id="fbNewTrip" app-name="tripawesome" data="{{newTrip}}"></firebase-document>
        <div id="cards">
            <template is="dom-repeat" items="{{trips}}" as="item">
                <trip-card route="{{route}}" item="[[item]]" on-details-tap="_handleDetailsTap"></trip-card>
            </template>
        </div>
        <a href="/create-trip"><paper-fab icon="add" class="action-right"></paper-fab></a>
    </template>
    <script>
    (() => {
        'use strict';

        class TripsElement {
            get is() {
                return 'trips-element';
            }
            get properties() {
                return {
                    trips: {
                        type: Array,
                        notify: true
                    },
                    selectedTrip: {
                        type: String,
                        notify: true
                    }
                };
            }
            _handleDetailsTap(e, data) {
                this.selectedTrip = data.key;
                this.fire('trip-selected', data);
            }
            _createTrip() {
                this.fire('create-trip-tap');
            }
        }
        Polymer(TripsElement);
    })();
    </script>
</dom-module>
