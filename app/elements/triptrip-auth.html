<link rel="import" href="../bower_components/polymer/polymer.html">
<dom-module id="triptrip-auth">
    <template>
        <style include="shared-styles">
        :host {
            display: block;
            text-align: center;
        }
        </style>
        <firebase-auth id="auth" app-name="tripawesome" user="{{user}}" provider="facebook" signed-in="{{_authenticated}}">
        </firebase-auth>
        <paper-dialog id="modal" modal opened="[[!_authenticated]]">
            <p>Please Login</p>
            <paper-button raised on-tap="_authenticate">Facebook</paper-button>
        </paper-dialog>
    </template>
    <script>
    (() => {
        'use strict';

        class TripTripAuth {
            get is() {
                return 'triptrip-auth';
            }
            get properties() {
                return {
                    _authenticated: {
                        type: Boolean,
                        observer: '_authenticatedChanged'
                    }
                };
            }
            _authenticatedChanged(authenticated) {
                if (!authenticated) {
                    this.$.modal.open();
                }
            }
            _authenticate() {
                this.$.auth.signInWithPopup();
            }
        }
        Polymer(TripTripAuth);
    })();
    </script>
</dom-module>
